import{D as G,b as S}from"./iframe-BC6yI4nO.js";let y,j=0;function k(t){y=t}function P(){y=null,j=0}function T(){return j++}const C=Symbol("haunted.phase"),v=Symbol("haunted.hook"),z=Symbol("haunted.update"),O=Symbol("haunted.commit"),l=Symbol("haunted.effects"),f=Symbol("haunted.layoutEffects"),E="haunted.context";class I{update;host;virtual;[v];[l];[f];constructor(e,s){this.update=e,this.host=s,this[v]=new Map,this[l]=[],this[f]=[]}run(e){k(this);let s=e();return P(),s}_runEffects(e){let s=this[e];k(this);for(let r of s)r.call(this);P()}runEffects(){this._runEffects(l)}runLayoutEffects(){this._runEffects(f)}teardown(){this[v].forEach(s=>{typeof s.teardown=="function"&&s.teardown(!0)})}}const B=Promise.resolve().then.bind(Promise.resolve());function A(){let t=[],e;function s(){e=null;let r=t;t=[];for(var n=0,h=r.length;n<h;n++)r[n]()}return function(r){t.push(r),e==null&&(e=B(s))}}const U=A(),R=A();class W{renderer;host;state;[C];_updateQueued;_active;constructor(e,s){this.renderer=e,this.host=s,this.state=new I(this.update.bind(this),s),this[C]=null,this._updateQueued=!1,this._active=!0}update(){this._active&&(this._updateQueued||(U(()=>{let e=this.handlePhase(z);R(()=>{this.handlePhase(O,e),R(()=>{this.handlePhase(l)})}),this._updateQueued=!1}),this._updateQueued=!0))}handlePhase(e,s){switch(this[C]=e,e){case O:this.commit(s),this.runEffects(f);return;case z:return this.render();case l:return this.runEffects(l)}}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(e){this.state._runEffects(e)}teardown(){this.state.teardown()}pause(){this._active=!1}resume(){this._active=!0}}const Z=(...t)=>{const e=new CSSStyleSheet;return e.replaceSync(t.join("")),e},q=t=>t?.map(e=>typeof e=="string"?Z(e):e),J=(t="")=>t.replace(/-+([a-z])?/g,(e,s)=>s?s.toUpperCase():"");function K(t){class e extends W{frag;renderResult;constructor(n,h,m){super(n,m||h),this.frag=h}commit(n){this.renderResult=t(n,this.frag)}}function s(r,n,h){const m=(h||n||{}).baseElement||HTMLElement,{observedAttributes:N=[],useShadowDOM:L=!0,shadowRootInit:D={},styleSheets:$}=h||n||{},w=q(r.styleSheets||$);class x extends m{_scheduler;static get observedAttributes(){return r.observedAttributes||N||[]}constructor(){if(super(),L===!1)this._scheduler=new e(r,this);else{const o=this.attachShadow({mode:"open",...D});w&&(o.adoptedStyleSheets=w),this._scheduler=new e(r,o,this)}}connectedCallback(){this._scheduler.resume(),this._scheduler.update(),this._scheduler.renderResult?.setConnected(!0)}disconnectedCallback(){this._scheduler.pause(),this._scheduler.teardown(),this._scheduler.renderResult?.setConnected(!1)}attributeChangedCallback(o,c,i){if(c===i)return;let u=i===""?!0:i;Reflect.set(this,J(o),u)}}function M(a){let o=a,c=!1;return Object.freeze({enumerable:!0,configurable:!0,get(){return o},set(i){c&&o===i||(c=!0,o=i,this._scheduler&&this._scheduler.update())}})}const Q=new Proxy(m.prototype,{getPrototypeOf(a){return a},set(a,o,c,i){let u;return o in a?(u=Object.getOwnPropertyDescriptor(a,o),u&&u.set?(u.set.call(i,c),!0):(Reflect.set(a,o,c,i),!0)):(typeof o=="symbol"||o[0]==="_"?u={enumerable:!0,configurable:!0,writable:!0,value:c}:u=M(c),Object.defineProperty(i,o,u),u.set&&u.set.call(i,c),!0)}});return Object.setPrototypeOf(x.prototype,Q),x}return s}class d{id;state;constructor(e,s){this.id=e,this.state=s}}function X(t,...e){let s=T(),r=y[v],n=r.get(s);return n||(n=new t(s,y,...e),r.set(s,n)),n.update(...e)}function p(t){return X.bind(null,t)}function F(t){return p(class extends d{callback;lastValues;values;_teardown;constructor(e,s,r,n){super(e,s),t(s,this)}update(e,s){this.callback=e,this.values=s}call(){const e=!this.values||this.hasChanged();this.lastValues=this.values,e&&this.run()}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(e){typeof this._teardown=="function"&&(this._teardown(),this._teardown=void 0),e&&(this.lastValues=this.values=void 0)}hasChanged(){return!this.lastValues||this.values.some((e,s)=>this.lastValues[s]!==e)}})}function H(t,e){t[l].push(e)}F(H);const Y=t=>t instanceof Element?t:t.startNode||t.endNode||t.parentNode,V=p(class extends d{Context;value;_ranEffect;_unsubscribe;constructor(t,e,s){super(t,e),this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,H(e,this)}update(t){return this.Context!==t&&(this._subscribe(t),this.Context=t),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(t){this.value=t,this.state.update()}_subscribe(t){const e={Context:t,callback:this._updater};Y(this.state.host).dispatchEvent(new CustomEvent(E,{detail:e,bubbles:!0,cancelable:!0,composed:!0}));const{unsubscribe:r=null,value:n}=e;this.value=r?n:t.defaultValue,this._unsubscribe=r}teardown(){this._unsubscribe&&this._unsubscribe()}});function tt(t){return e=>{const s={Provider:class extends HTMLElement{listeners;_value;constructor(){super(),this.style.display="contents",this.listeners=new Set,this.addEventListener(E,this)}disconnectedCallback(){this.removeEventListener(E,this)}handleEvent(r){const{detail:n}=r;n.Context===s&&(n.value=this.value,n.unsubscribe=this.unsubscribe.bind(this,n.callback),this.listeners.add(n.callback),r.stopPropagation())}unsubscribe(r){this.listeners.delete(r)}set value(r){this._value=r;for(let n of this.listeners)n(r)}get value(){return this._value}},Consumer:t(function({render:r}){const n=V(s);return r(n)},{useShadowDOM:!1}),defaultValue:e};return s}}p(class extends d{value;values;constructor(t,e,s,r){super(t,e),this.value=s(),this.values=r}update(t,e){return this.hasChanged(e)&&(this.values=e,this.value=t()),this.value}hasChanged(t=[]){return t.some((e,s)=>this.values[s]!==e)}});function et(t,e){t[f].push(e)}F(et);const st=p(class extends d{args;constructor(t,e,s){super(t,e),this.updater=this.updater.bind(this),typeof s=="function"&&(s=s()),this.makeArgs(s)}update(){return this.args}updater(t){const[e]=this.args;typeof t=="function"&&(t=t(e)),!Object.is(e,t)&&(this.makeArgs(t),this.state.update())}makeArgs(t){this.args=Object.freeze([t,this.updater])}});p(class extends d{reducer;currentState;constructor(t,e,s,r,n){super(t,e),this.dispatch=this.dispatch.bind(this),this.currentState=n!==void 0?n(r):r}update(t){return this.reducer=t,[this.currentState,this.dispatch]}dispatch(t){this.currentState=this.reducer(this.currentState,t),this.state.update()}});const rt=/([A-Z])/gu;p(class extends d{property;eventName;constructor(t,e,s,r){if(super(t,e),this.state.virtual)throw new Error("Can't be used with virtual components.");this.updater=this.updater.bind(this),this.property=s,this.eventName=s.replace(rt,"-$1").toLowerCase()+"-changed",this.state.host[this.property]==null&&(typeof r=="function"&&(r=r()),r!=null&&this.updateProp(r))}update(t,e){return[this.state.host[this.property],this.updater]}updater(t){const e=this.state.host[this.property];typeof t=="function"&&(t=t(e)),!Object.is(e,t)&&this.updateProp(t)}updateProp(t){this.notify(t).defaultPrevented||(this.state.host[this.property]=t)}notify(t){const e=new CustomEvent(this.eventName,{detail:{value:t,path:this.property},cancelable:!0});return this.state.host.dispatchEvent(e),e}});function nt({render:t}){const e=K(t),s=tt(e);return{component:e,createContext:s}}const{component:ot}=nt({render:G}),it=t=>{const[e,s]=st(0),{greeting:r="Hello"}=t;return S`
		<p>${r}, World! Count: ${e}</p>
		<button @click=${()=>s(e+1)}>Increment</button>
	`};customElements.define("cosmoz-component",ot(it,{observedAttributes:["greeting"]}));const ct={title:"CosmozComponent",component:"cosmoz-component",argTypes:{greeting:{control:"text"}}},b={args:{greeting:"Hello"},render:t=>S`<cosmoz-component greeting=${t.greeting}></cosmoz-component>`},g={render:()=>S`<cosmoz-component greeting="Hi there"></cosmoz-component>`},_={render:()=>S`<cosmoz-component></cosmoz-component>`};b.parameters={...b.parameters,docs:{...b.parameters?.docs,source:{originalSource:`{
  args: {
    greeting: 'Hello'
  },
  render: args => html\`<cosmoz-component greeting=\${args.greeting}></cosmoz-component>\`
}`,...b.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:'{\n  render: () => html`<cosmoz-component greeting="Hi there"></cosmoz-component>`\n}',...g.parameters?.docs?.source}}};_.parameters={..._.parameters,docs:{..._.parameters?.docs,source:{originalSource:"{\n  render: () => html`<cosmoz-component></cosmoz-component>`\n}",..._.parameters?.docs?.source}}};const at=["Default","CustomGreeting","NoGreeting"];export{g as CustomGreeting,b as Default,_ as NoGreeting,at as __namedExportsOrder,ct as default};
